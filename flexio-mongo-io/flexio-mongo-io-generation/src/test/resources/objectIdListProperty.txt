package org.generated.mongo;

import java.lang.Object;
import java.lang.String;
import java.util.Collection;
import java.util.LinkedList;
import org.bson.Document;
import org.bson.types.ObjectId;
import org.generated.Test;

public class TestMongoMapper {
  public Test toValue(Document document) {
    Test.Builder builder = Test.builder();
    if (document.get("p") != null) {
      LinkedList<String> pElmts = new LinkedList<>();
      for (Object pVal : (Collection)document.get("p")) {
        String pElmt = pVal.toString();
        pElmts.add(pElmt);
      }
      builder.p(pElmts);
    }
    return builder.build();
  }

  public Document toDocument(Test value) {
    Document document = new Document();
    if (value.p() != null) {
      LinkedList pElmts = new LinkedList();
      for (String pVal : value.p()) {
        Object pElmt;
        if (ObjectId.isValid(pVal)) {
          pElmt = new ObjectId(pVal);
        } else {
          pElmt = pVal;
        }
        pElmts.add(pElmt);
      }
      document.put("p", pElmts);
    } else {
      document.put("p", null);
    }
    return document;
  }
}
